{
  "git_hooks": {
    "success": false,
    "duration": 3.051460027694702,
    "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.11, pytest-8.4.2, pluggy-1.6.0 -- /openhands/poetry/openhands-ai-5O4_aCHf-py3.12/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.12.11', 'Platform': 'Linux-6.11.11-linuxkit-aarch64-with-glibc2.41', 'Packages': {'pytest': '8.4.2', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'json-report': '1.5.0', 'forked': '1.6.0', 'cov': '7.0.0', 'asyncio': '1.3.0', 'timeout': '2.4.0', 'metadata': '3.1.1', 'playwright': '0.7.1', 'base-url': '2.1.0', 'libtmux': '0.47.0', 'xdist': '3.8.0'}, 'Base URL': ''}\nrootdir: /workspace/openhands\nconfigfile: pytest.ini\nplugins: anyio-4.9.0, json-report-1.5.0, forked-1.6.0, cov-7.0.0, asyncio-1.3.0, timeout-2.4.0, metadata-3.1.1, playwright-0.7.1, base-url-2.1.0, libtmux-0.47.0, xdist-3.8.0\nasyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncollecting ... collected 14 items\n\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_maybe_setup_git_hooks_success PASSED [  7%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_maybe_setup_git_hooks_no_script PASSED [ 14%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_maybe_setup_git_hooks_mkdir_failure PASSED [ 21%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_maybe_setup_git_hooks_with_existing_hook PASSED [ 28%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_script_permissions PASSED [ 35%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_backup_existing FAILED [ 42%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_multiple_hooks PASSED [ 50%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_script_validation PASSED [ 57%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_concurrent_access PASSED [ 64%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_error_recovery PASSED [ 71%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_temp_directory_handling PASSED [ 78%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_script_content_integrity PASSED [ 85%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_environment_variables PASSED [ 92%]\ntests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_filesystem_edge_cases PASSED [100%]\n\n=================================== FAILURES ===================================\n__________________ TestGitHooks.test_git_hook_backup_existing __________________\n\nself = <test_git_hooks.TestGitHooks object at 0xffff685c12e0>\nmock_runtime = <MagicMock spec='Runtime' id='281472433017232'>\n\n    def test_git_hook_backup_existing(self, mock_runtime):\n        \"\"\"Test that existing git hooks are properly backed up.\"\"\"\n        def mock_read_with_existing(action):\n            if action.path == '.openhands/pre-commit.sh':\n                return FileReadObservation(\n                    content=\"#!/bin/bash\\necho 'New pre-commit hook'\\nexit 0\",\n                    path='.openhands/pre-commit.sh',\n                )\n            elif action.path == '.git/hooks/pre-commit':\n                return FileReadObservation(\n                    content=\"#!/bin/bash\\necho 'Existing hook'\\nexit 0\",\n                    path='.git/hooks/pre-commit',\n                )\n            return ErrorObservation(content='File not found')\n    \n        mock_runtime.read.side_effect = mock_read_with_existing\n    \n        Runtime.maybe_setup_git_hooks(mock_runtime)\n    \n        # Verify backup was created\n        backup_calls = [\n            call for call in mock_runtime.run_action.call_args_list\n            if isinstance(call[0][0], CmdRunAction) and '.bak' in call[0][0].command\n        ]\n>       assert len(backup_calls) > 0\nE       assert 0 > 0\nE        +  where 0 = len([])\n\ntests/unit/runtime/test_git_hooks.py:200: AssertionError\n--------------------------------- JSON report ----------------------------------\nreport saved to: test_results.json\n=========================== short test summary info ============================\nFAILED tests/unit/runtime/test_git_hooks.py::TestGitHooks::test_git_hook_backup_existing - assert 0 > 0\n +  where 0 = len([])\n========================= 1 failed, 13 passed in 2.15s =========================\n",
    "stderr": "",
    "test_count": 14,
    "passed": 13,
    "failed": 1,
    "skipped": 0,
    "coverage": {}
  },
  "overall_success": false
}